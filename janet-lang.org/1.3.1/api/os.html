
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <title>OS Module</title>
    <meta name="description" content="Janet is a functional and imperative programming language. It runs on Windows, Linux, macOS, FreeBSD and *nix.">
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="../css/docpage.css" type="text/css" media="screen" charset="utf-8">
    <link rel="shortcut icon" href="assets/favicon.ico">

    <!-- Open Graph -->
    <meta property="og:description" content="Janet is a functional and imperative programming language. It runs on Windows, Linux, macOS, FreeBSD and *nix." />
    <meta property="og:title" content="OS Module" />
    <meta property="og:type" content="website" />
  </head>
  <body>

    <div id="toc-toggle" class="">
      <div class="bar topbar"></div>
      <div class="bar"></div>
      <div class="bar botbar"></div>
    </div>
    <script charset="utf-8">
      function toggleToc() {
        var toggler = document.getElementById('toc-toggle');
        var wrapper = document.querySelector('.toc');
        wrapper.classList.toggle('toc-hidden');
        toggler.classList.toggle('open');
        window.localStorage.setItem('show-toc', toggler.classList.contains('open'));
      }
      function addTocToggle() {
        var el = document.getElementById('toc-toggle');
        if (window.localStorage.getItem('show-toc') === 'true') {
          toggleToc()
        }
        el.addEventListener('click', toggleToc);
      }
      window.addEventListener('DOMContentLoaded', addTocToggle);
    </script>

    

    <div class="twocol">
      <div class="toc toc-hidden">
        <ul>
          <li><span><a href="../index.html">Home</a></span></li><li class="caret"><span><a href="../docs/index.html">Documentation</a></span><ul><li><span><a href="../docs/syntax.html">Syntax and the Parser</a></span></li><li><span><a href="../docs/specials.html">Special Forms</a></span></li><li><span><a href="../docs/numbers.html">Numbers and Arithmetic</a></span></li><li><span><a href="../docs/bindings.html">Bindings (def and var)</a></span></li><li><span><a href="../docs/flow.html">Flow</a></span></li><li><span><a href="../docs/functions.html">Functions</a></span></li><li><span><a href="../docs/strings.html">Strings, Keywords, and Symbols</a></span></li><li><span><a href="../docs/loop.html">Looping</a></span></li><li><span><a href="../docs/macros.html">Macros</a></span></li><li><span><a href="../docs/destructuring.html">Destructuring</a></span></li><li class="caret"><span><a href="../docs/data_structures/index.html">Data Structures</a></span><ul><li><span><a href="../docs/data_structures/arrays.html">Arrays</a></span></li><li><span><a href="../docs/data_structures/buffers.html">Buffers</a></span></li><li><span><a href="../docs/data_structures/tables.html">Tables</a></span></li><li><span><a href="../docs/data_structures/structs.html">Structs</a></span></li><li><span><a href="../docs/data_structures/tuples.html">Tuples</a></span></li></ul></li><li><span><a href="../docs/modules.html">Modules</a></span></li><li class="caret"><span><a href="../docs/fibers/index.html">Fibers</a></span><ul><li><span><a href="../docs/fibers/dynamic_bindings.html">Dynamic Bindings</a></span></li><li><span><a href="../docs/fibers/error_handling.html">Errors</a></span></li></ul></li><li><span><a href="../docs/object_oriented.html">Object Oriented Programming</a></span></li><li><span><a href="../docs/peg.html">Parsing Expression Grammars</a></span></li><li><span><a href="../docs/prototypes.html">Prototypes</a></span></li><li><span><a href="../docs/abstract_machine.html">The Janet Abstract Machine</a></span></li><li><span><a href="../docs/jpm.html">jpm</a></span></li></ul></li><li class="caret"><span><a href="index.html">API</a></span><ul><li><span><a href="array.html">array</a></span></li><li><span><a href="buffer.html">buffer</a></span></li><li><span><a href="debug.html">debug</a></span></li><li><span><a href="fiber.html">fiber</a></span></li><li><span><a href="file.html">file</a></span></li><li><span><a href="int.html">int</a></span></li><li><span><a href="math.html">math</a></span></li><li><span><a href="module.html">module</a></span></li><li><span class="selected"><a href="os.html">os</a></span></li><li><span><a href="peg.html">peg</a></span></li><li><span><a href="parser.html">parser</a></span></li><li><span><a href="string.html">string</a></span></li><li><span><a href="table.html">table</a></span></li><li><span><a href="tuple.html">tuple</a></span></li><li><span><a href="tarray.html">tarray</a></span></li></ul></li><li class="caret"><span><a href="../capi/index.html">C API</a></span><ul><li><span><a href="../capi/wrapping.html">Wrapping Types</a></span></li><li><span><a href="../capi/embedding.html">Embedding</a></span></li><li><span><a href="../capi/configuration.html">Configuration</a></span></li><li><span><a href="../capi/array.html">Array C API</a></span></li><li><span><a href="../capi/buffer.html">Buffer C API</a></span></li><li><span><a href="../capi/table.html">Table C API</a></span></li><li><span><a href="../capi/fiber.html">Fiber C API</a></span></li><li><span><a href="../capi/memory-model.html">Memory Model</a></span></li></ul></li>
        </ul>
      </div>
      <div class="content-wrapper main-content">
        <h4 class="subtitle">Janet 1.3.1 Documentation</h4>
        <h1 class="subtitle">OS Module</h1>
        <div class="prevnext-bar">
          <span class="prev"><a href="module.html"><span class="prevnext-text">Module Module</span></a></span>

          <span class="next"><a href="peg.html"><span class="prevnext-text">PEG Module</span></a></span>
        </div>
        

<p>The <code class="mendoza-code">os</code> module contains most Operating System specific functionality as well as routines
for interacting with the host OS. There is also some functionality for interacting with the
file system. The functionality in this module can be much reduced by setting the <code class="mendoza-code">JANET_REDUCED_OS</code>
define in <code class="mendoza-code">janetconf.h</code>.
</p>
<h2>Index
</h2>
<p><a href="#os/arch">os/arch</a> <a href="#os/cd">os/cd</a> <a href="#os/clock">os/clock</a> <a href="#os/cwd">os/cwd</a> <a href="#os/date">os/date</a> <a href="#os/dir">os/dir</a> <a href="#os/execute">os/execute</a> <a href="#os/exit">os/exit</a> <a href="#os/getenv">os/getenv</a> <a href="#os/link">os/link</a> <a href="#os/mkdir">os/mkdir</a> <a href="#os/rename">os/rename</a> <a href="#os/rm">os/rm</a> <a href="#os/rmdir">os/rmdir</a> <a href="#os/setenv">os/setenv</a> <a href="#os/shell">os/shell</a> <a href="#os/sleep">os/sleep</a> <a href="#os/stat">os/stat</a> <a href="#os/time">os/time</a> <a href="#os/touch">os/touch</a> <a href="#os/which">os/which</a> </p><hr><div class="binding"><span id="os/arch" class="binding-sym">os/arch</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/arch)

Check the ISA that janet was compiled for. Returns one of:

	:x86
	:x86-64
	:arm
	:aarch64
	:sparc
	:wasm
	:unknown
</pre></div><hr><div class="binding"><span id="os/cd" class="binding-sym">os/cd</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/cd path)

Change current directory to path. Returns true on success, false on failure.</pre></div><hr><div class="binding"><span id="os/clock" class="binding-sym">os/clock</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/clock)

Return the number of seconds since some fixed point in time. The clock is guaranteed to be non decreasing in real time.</pre></div><hr><div class="binding"><span id="os/cwd" class="binding-sym">os/cwd</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/cwd)

Returns the current working directory.</pre></div><hr><div class="binding"><span id="os/date" class="binding-sym">os/date</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/date &amp;opt time)

Returns the given time as a date struct, or the current time if no time is given. Returns a struct with following key values. Note that all numbers are 0-indexed.

	:seconds - number of seconds [0-61]
	:minutes - number of minutes [0-59]
	:hours - number of hours [0-23]
	:month-day - day of month [0-30]
	:month - month of year [0, 11]
	:year - years since year 0 (e.g. 2019)
	:week-day - day of the week [0-6]
	:year-day - day of the year [0-365]
	:dst - If Day Light Savings is in effect</pre></div><hr><div class="binding"><span id="os/dir" class="binding-sym">os/dir</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/dir dir &amp;opt array)

Iterate over files and subdirectories in a directory. Returns an array of paths parts, with only the filename or directory name and no prefix.</pre></div><hr><div class="binding"><span id="os/execute" class="binding-sym">os/execute</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/execute args &amp;opts flags env)

Execute a program on the system and pass it string arguments. Flags is a keyword that modifies how the program will execute.

	:e - enables passing an environment to the program. Without :e, the current environment is inherited.
	:p - allows searching the current PATH for the binary to execute. Without this flag, binaries must use absolute paths.

env is a table or struct mapping environment variables to values. Returns the exit status of the program.</pre></div><hr><div class="binding"><span id="os/exit" class="binding-sym">os/exit</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/exit &amp;opt x)

Exit from janet with an exit code equal to x. If x is not an integer, the exit with status equal the hash of x.</pre></div><hr><div class="binding"><span id="os/getenv" class="binding-sym">os/getenv</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/getenv variable)

Get the string value of an environment variable.</pre></div><hr><div class="binding"><span id="os/link" class="binding-sym">os/link</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/link oldpath newpath &amp;opt symlink)

Create a symlink from oldpath to newpath. The 3 optional paramater enables a hard link over a soft link. Does not work on Windows.</pre></div><hr><div class="binding"><span id="os/mkdir" class="binding-sym">os/mkdir</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/mkdir path)

Create a new directory. The path will be relative to the current directory if relative, otherwise it will be an absolute path.</pre></div><hr><div class="binding"><span id="os/rename" class="binding-sym">os/rename</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/rename oldname newname)

Rename a file on disk to a new path. Returns nil.</pre></div><hr><div class="binding"><span id="os/rm" class="binding-sym">os/rm</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/rm path)

Delete a file. Returns nil.</pre></div><hr><div class="binding"><span id="os/rmdir" class="binding-sym">os/rmdir</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/rmdir path)

Delete a directory. The directory must be empty to succeed.</pre></div><hr><div class="binding"><span id="os/setenv" class="binding-sym">os/setenv</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/setenv variable value)

Set an environment variable.</pre></div><hr><div class="binding"><span id="os/shell" class="binding-sym">os/shell</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/shell str)

Pass a command string str directly to the system shell.</pre></div><hr><div class="binding"><span id="os/sleep" class="binding-sym">os/sleep</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/sleep nsec)

Suspend the program for nsec seconds. 'nsec' can be a real number. Returns nil.</pre></div><hr><div class="binding"><span id="os/stat" class="binding-sym">os/stat</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/stat path &amp;opt tab|key)

Gets information about a file or directory. Returns a table If the third argument is a keyword, returns only that information from stat. If the file or directory does not exist, returns nil. The keys are

	:dev - the device that the file is on
	:mode - the type of file, one of :file, :directory, :block, :character, :fifo, :socket, :link, or :other
	:permissions - A unix permission string like "rwx--x--x"
	:uid - File uid
	:gid - File gid
	:nlink - number of links to file
	:rdev - Real device of file. 0 on windows.
	:size - size of file in bytes
	:blocks - number of blocks in file. 0 on windows
	:blocksize - size of blocks in file. 0 on windows
	:accessed - timestamp when file last accessed
	:changed - timestamp when file last chnaged (permissions changed)
	:modified - timestamp when file last modified (content changed)
</pre></div><hr><div class="binding"><span id="os/time" class="binding-sym">os/time</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/time)

Get the current time expressed as the number of seconds since January 1, 1970, the Unix epoch. Returns a real number.</pre></div><hr><div class="binding"><span id="os/touch" class="binding-sym">os/touch</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/touch path &amp;opt actime modtime)

Update the access time and modification times for a file. By default, sets times to the current time.</pre></div><hr><div class="binding"><span id="os/which" class="binding-sym">os/which</span> <span class="binding-type">cfunction</span> <pre class="binding-text">(os/which)

Check the current operating system. Returns one of:

	:windows
	:macos
	:web - Web assembly (emscripten)
	:linux
	:freebsd
	:openbsd
	:netbsd
	:posix - A POSIX compatible system (default)</pre></div>
        <div class="prevnext-bar">
          <span class="prev"><a href="module.html"><span class="prevnext-text">Module Module</span></a></span>
          <span class="next"><a href="peg.html"><span class="prevnext-text">PEG Module</span></a></span>
        </div>
      </div>
    </div>

    
<footer>
  &copy; Calvin Rose 2019
  <div class="gentag">Generated on October 1, 2019 at 20:32:58 with Janet 1.3.1-7809f89</div>
  <div class="see-problem">See a problem? Source
    <a href="https://github.com/janet-lang/janet-lang.org">on GitHub</a></div>
</footer>



  </body>
</html>
